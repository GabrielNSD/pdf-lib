<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="
        default-src 'self' 'unsafe-inline' blob: resource:;
        object-src 'self' blob:;
        frame-src 'self' blob:;
      "
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="/apps/web/index.css" />
    <title>Test 19</title>
    <script type="text/javascript" src="/dist/pdf-lib.js"></script>
    <script type="text/javascript" src="/apps/web/utils.js"></script>
  </head>

  <body>
    <div id="button-container">
      <button onclick="window.location.href = '/apps/web/test3.html'">
        Prev
      </button>
      <button onclick="test()">Run Test</button>
      <button onclick="window.location.href = '/apps/web/test5.html'">
        Next
      </button>
    </div>
    <!-- <div id="animation-target"></div> -->
    <iframe id="iframe"></iframe>
  </body>

  <script type="text/javascript">
   // startFpsTracker('animation-target');

    const renderInIframe = (pdfBytes) => {
      const blob = new Blob([pdfBytes], { type: 'application/pdf' });
      const blobUrl = URL.createObjectURL(blob);
      document.getElementById('iframe').src = blobUrl;
    };

    async function test() {
      const {
        PDFDocument,
        PDFPage,
        radians,
        StandardFonts,
        rgb,
        degrees,
      } = PDFLib;

      const pdfDoc = await PDFDocument.create();
      const firstPage = pdfDoc.addPage([1000, 1000]);

      const fontSize = 20;

      // viewBox="-10 -18.00936768149883 20 36.01873536299766 -5 -5 7 5"
      const svg = `<svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="427" height="769"
      viewBox="-10 -18.00936768149883 20 36.01873536299766"
    >
      <g transform="scale(1 -1) translate(0 0)">
      <line id="gridX:0" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:1" x1="1" x2="1" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:2" x1="2" x2="2" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:3" x1="3" x2="3" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:4" x1="4" x2="4" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:5" x1="5" x2="5" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:6" x1="6" x2="6" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:7" x1="7" x2="7" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:8" x1="8" x2="8" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridX:9" x1="9" x2="9" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-1" x1="-1" x2="-1" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-2" x1="-2" x2="-2" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-3" x1="-3" x2="-3" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-4" x1="-4" x2="-4" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-5" x1="-5" x2="-5" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-6" x1="-6" x2="-6" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-7" x1="-7" x2="-7" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-8" x1="-8" x2="-8" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridx:-9" x1="-9" x2="-9" y1="-18.00936768149883" y2="18.00936768149883" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:0" x1="-10" x2="10" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:1" x1="-10" x2="10" y1="1" y2="1" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:2" x1="-10" x2="10" y1="2" y2="2" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:3" x1="-10" x2="10" y1="3" y2="3" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:4" x1="-10" x2="10" y1="4" y2="4" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:5" x1="-10" x2="10" y1="5" y2="5" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:6" x1="-10" x2="10" y1="6" y2="6" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:7" x1="-10" x2="10" y1="7" y2="7" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:8" x1="-10" x2="10" y1="8" y2="8" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:9" x1="-10" x2="10" y1="9" y2="9" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:10" x1="-10" x2="10" y1="10" y2="10" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:11" x1="-10" x2="10" y1="11" y2="11" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:12" x1="-10" x2="10" y1="12" y2="12" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:13" x1="-10" x2="10" y1="13" y2="13" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:14" x1="-10" x2="10" y1="14" y2="14" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:15" x1="-10" x2="10" y1="15" y2="15" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:16" x1="-10" x2="10" y1="16" y2="16" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:17" x1="-10" x2="10" y1="17" y2="17" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:18" x1="-10" x2="10" y1="18" y2="18" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-1" x1="-10" x2="10" y1="-1" y2="-1" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-2" x1="-10" x2="10" y1="-2" y2="-2" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-3" x1="-10" x2="10" y1="-3" y2="-3" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-4" x1="-10" x2="10" y1="-4" y2="-4" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-5" x1="-10" x2="10" y1="-5" y2="-5" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-6" x1="-10" x2="10" y1="-6" y2="-6" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-7" x1="-10" x2="10" y1="-7" y2="-7" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-8" x1="-10" x2="10" y1="-8" y2="-8" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-9" x1="-10" x2="10" y1="-9" y2="-9" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-10" x1="-10" x2="10" y1="-10" y2="-10" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-11" x1="-10" x2="10" y1="-11" y2="-11" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-12" x1="-10" x2="10" y1="-12" y2="-12" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-13" x1="-10" x2="10" y1="-13" y2="-13" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-14" x1="-10" x2="10" y1="-14" y2="-14" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-15" x1="-10" x2="10" y1="-15" y2="-15" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-16" x1="-10" x2="10" y1="-16" y2="-16" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-17" x1="-10" x2="10" y1="-17" y2="-17" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<line id="gridy:-18" x1="-10" x2="10" y1="-18" y2="-18" stroke-width="0.0468384074941452" stroke-linecap="round" stroke="#E5E5E5" />
<ellipse id="231dae4a-8412-40cd-ae3c-f7168a3f1990" cx="-4" cy="1" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="231dae4a-8412-40cd-ae3c-f7168a3f1990" cx="-4" cy="1" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="6c9d231e-0edf-4477-9f27-a79c3113b65e" cx="-4" cy="4" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="e26310b2-41a0-4f7c-90b3-f9204c327c0b" cx="1" cy="4" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="ae4bb452-cd32-41cb-bb0c-d5e779a5b920" cx="1" cy="1" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="7aa01b8d-4c58-47c5-ba2a-7d2b2bdc9dcd" cx="-2" cy="2" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="f2ee22ac-089e-4967-ba94-adfd648a0602" cx="-1" cy="2" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="86ee426b-be8d-4144-b523-255a02365638" cx="-1" cy="3" rx="0.2" ry="0.2" fill="#000000ff" />
<ellipse id="3a2318aa-9505-4daa-a631-60fdbcd98aae" cx="-2" cy="3" rx="0.2" ry="0.2" fill="#000000ff" />
      </g>
    </svg>`
      // viewBox="100 50 100 50"
      const svg2 = '<svg xmlns="http://www.w3.org/2000/svg" width="200" height="100" viewBox="0 0 200 100" version="1.1"><rect width="200" height="100" stroke="black" stroke-width="6" fill="green"/></svg>'
      
      const svg3 = `<svg xmlns="http://www.w3.org/2000/svg" width="200" height="100" viewBox="0 0 200 100" version="1.1">
 <ellipse cx="0" cy="0" rx="100" ry="50" stroke="black" stroke-width="6" fill="green"/>
</svg>`

      firstPage.drawText('Select your favorite planet:', {
        x: 0,
        y: 900,
        size: 20,
      });
      firstPage.drawSvg(svg2, {
          x: 500,
          y: 500,/* 
          width: 427 / 3,
          height: 769 / 3 */
          });
      firstPage.drawSvg(svg3, {
          x: 500,
          y: 500,/* 
          width: 427 / 3,
          height: 769 / 3 */
          });

      const pdfBytes = await pdfDoc.save();

      renderInIframe(pdfBytes);
    }
  </script>
</html>
